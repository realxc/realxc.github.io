title: 数据库-重启引发的主键问题
author: Xiang Chuang
tags:
  - db
categories:
  - 爱学爱问
date: 2018-07-22 12:04:00
---
问题：cs系统 shut_message  自增主键id变小了。

原因：cs的数据库重启了，但是应用没停止，   mysql重启后，回滚了部分自增id，（亦或者是备库当主库用）


业务原因：本以为外网关闭了，定时任务关闭了 不会有交易
但是，  应用监控检查发邮件了，cs通过mq接收到了请求，连接数据库失败（此时数据库连接不上）。