title: 'G1- --xx:initiatingheapoccupancypercent变量之问'
author: Xiang Chuang
categories:
  - 爱学爱问
tags:
  - GC-G1
  - JVM
  - GC
date: 2019-04-09 22:24:00
---

问题：该变量究竟何意？
官方解释
![upload successful](\images\pasted-0.png)

疑问：整堆占用率，到底是老年代区域占用整堆比率还是所有区域占用整堆比率？
个人认为应该是老年代占用区域
原因：
1、新生代默认比例为5-60%， 新生代的回收是使用殆尽时，那么，本文讨论的这个变量默认时45%，这两个是用一点冲突的
2、工作内存调优时发现gc日志，报出占用率超过45%时，此时更像是老年代超过45%
3、工作内存调优过程：
mpay堆大小 1500多兆，堆内存使用率预警值90%  
a、最初时候出现预警时 堆内存占用率时 1500*60% + ？ = 1500M左右 即，差不多用光了； 时常预警
b、后来调成 1500*25% + ？=1000M左右； 没有再预警
c、再后来调成 1500*45% + ？ = 1350M左右 很少出现
【？】处是老年代的占比，  如果用45%来计算，才能符合我们的现象。

a、 最初时候出现预警时 堆内存占用率时 1500*60% + 1500*45% ；
b、后来调成 1500*25% + 1500*45%=975M ；
c、再后来调成 1500*45% + 1500*45% = 1350M